function fbLogin(callbackFnc, notAuthCallbackFnc){
  	if (typeof (FB) != 'undefined' && FB != null) {
  		FB.getLoginStatus(function(response) {
  			if (response.status === 'connected') {
  			  var accessToken = response.authResponse.accessToken;
  			  $.post("{{ path('fbWriteAuthInSession') }}", {
            		"accessToken" : accessToken
            	}, function(response) {
            		if (response.accessToken == accessToken) {
            		    $.oauthpopup({
                    			path : "{{ path(loginCheck) }}" + "?facebook=true",
                    			callback : callbackFnc
                    		});
            		}
            	});
  			}
  			else {
  			    $.oauthpopup({
        			path : "{{ facebook_login_url(url(loginCheck)) }}",
        			callback : callbackFnc
        		});
  			}
  		});
  	}
}